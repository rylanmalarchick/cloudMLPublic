================================================================================
WP-3 QUICK FIX: RESULTS COMPARISON
================================================================================

QUESTION: Was the catastrophic RÂ² = -14.15 caused by geometric features?
ANSWER: NO. ERA5 spatial resolution (25 km) is the primary bottleneck.

================================================================================
AGGREGATE METRICS
================================================================================

                          Original WP-3    ERA5-Only       Difference
                          (geo + ERA5)     (ERA5 only)     (Î”)
--------------------------------------------------------------------------------
Mean RÂ²:                  -14.15 Â± 24.30   -14.32 Â± 24.99  -0.17  (negligible)
Mean MAE:                  0.49 Â± 0.19 km   0.48 Â± 0.18 km -0.01 km
Mean RMSE:                 0.60 Â± 0.20 km   0.59 Â± 0.18 km -0.01 km

INTERPRETATION: Removing geometric features has NO meaningful effect.

================================================================================
PER-FOLD COMPARISON
================================================================================

Fold  Flight   n_test   Original RÂ²   ERA5-only RÂ²   Î” RÂ²      Notes
--------------------------------------------------------------------------------
0     30Oct24  501      -1.47         -1.42          +0.05     Slight improvement
1     10Feb25  163      -4.60         -3.90          +0.70     Modest improvement
2     23Oct24  101      -1.37         -1.67          -0.30     Slight degradation
3     12Feb25  144      -0.62         -0.37          +0.25     Modest improvement
4     18Feb25   24      -62.66        -64.24         -1.58     Still catastrophic

MEAN CHANGE: Î” RÂ² = -0.17 Â± 0.69 (not statistically significant)

================================================================================
ROOT CAUSE ANALYSIS
================================================================================

ðŸ”´ PRIMARY CAUSE: ERA5 Spatial Resolution Mismatch
   - ERA5 grid: 25 km spacing
   - Cloud scale: 200-800 m
   - Mismatch: 30-125Ã— too coarse
   - Evidence: ERA5-only RÂ² = -14.32 (same as full model)

ðŸŸ¡ SECONDARY CAUSE: Cross-Flight Domain Shift
   - Different atmospheric regimes across flights
   - Model memorizes training distribution, can't generalize
   - Fold 4 example: train mean = 0.83 km, test mean = 0.25 km
   
ðŸŸ¢ MINIMAL IMPACT: Geometric Features
   - Shadow-based CBH: r â‰ˆ 0.04 (no correlation)
   - Bias: +5.11 km (mean = 5.94 km vs true = 0.83 km)
   - Removing them: Î” RÂ² = 0.17 (within noise)
   
ðŸŸ¢ MINIMAL IMPACT: Imputation Bug
   - Affected: 120/933 samples (12.9%)
   - But feature was already useless (r â‰ˆ 0.04)
   - Fixing it wouldn't change results

================================================================================
DECISION
================================================================================

âœ… PROCEED WITH NEGATIVE RESULTS PAPER

The physics-constrained hypothesis has FAILED due to fundamental data 
limitations (ERA5 too coarse, shadow geometry unusable).

This is a HIGH-VALUE publication documenting:
1. Spatial scale mismatch (25 km vs 200-800 m)
2. Shadow-based geometry failure (r â‰ˆ 0.04)
3. Cross-flight generalization challenges
4. Technical lessons (imputation, validation protocols)

Timeline: 1-2 weeks

Alternative: Test HRRR 3 km reanalysis first (if data available)

âŒ DO NOT proceed to WP-4 hybrid (no signal in physical features)

================================================================================
WHY RÂ² IS NEGATIVE WHILE MAE/RMSE LOOK OK
================================================================================

This is NOT a bug. It happens when:
- Model learns training mean (â‰ˆ 0.83 km)
- Test set has different distribution
- Predictions cluster around training mean
- Absolute errors moderate (~0.5 km)
- But predictions are WORSE than just predicting mean

RÂ² = 1 - (SS_residual / SS_total)

When SS_residual > SS_total (worse than baseline), RÂ² < 0.

Example (Fold 4):
- Test mean: 0.25 km
- Model predicts: 1.06 km (memorized training mean)
- Error: 0.81 km
- RÂ² = -64 (catastrophic)

This is the model saying: "I can't generalize to this distribution."

================================================================================
BOTTOM LINE
================================================================================

Geometric features were NOT the problem. ERA5 is too coarse.
Write the negative results paper. ðŸ“

================================================================================
